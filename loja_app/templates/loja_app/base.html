{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="{% static 'css/styles.css' %}">
  <title>Nutri Amorim</title>
</head>
<body>

  <!-- Topbar -->
  <div class="topbar">
    <!-- Menu -->
    <div class="menu-icon">
      <div class="bar bar1"></div>
      <div class="bar bar2"></div>
      <div class="bar bar3"></div>
    </div>

    <!-- Barra de Pesquisa -->
    <div class="search-box">
      <input type="text" placeholder="Pesquisar...">
    </div>

    <!-- BotÃµes de Login e Sair -->
    <div class="auth-button">
      {% if user.is_authenticated %}
        <!-- BotÃ£o de sair se o usuÃ¡rio estiver logado -->
        <a href="{% url 'logout' %}">
          <button>Sair</button>
        </a>
      {% else %}
        <!-- BotÃ£o de login se o usuÃ¡rio nÃ£o estiver logado -->
        <a href="{% url 'login' %}">
          <button>Entrar / Criar Conta</button>
        </a>
      {% endif %}
    </div>

</div>
</div>

</body>
</html>

<!-- Subtopbar -->
<div class="subtopbar">
  <!-- Marcas Ã  esquerda -->
  <div class="dropdown-left">
    <button class="dropbtn">Marcas</button>
    <div class="dropdown-content">
      <a href="#">Marca 1</a>
      <a href="#">Marca 2</a>
      <a href="#">Marca 3</a>
      <!-- Adicione mais marcas -->
    </div>
  </div>

   <!-- BotÃµes centrais com Ã­cones -->
<ul class="subtopbar-links">
  <li>
    <a href="{% url 'way_protein' %}">
      <img src="{% static 'img/whey.png' %}" alt="Way Protein" class="menu-icon"> Way Protein
    </a>
  </li>
  <li>
    <a href="{% url 'creatinas' %}">
      <img src="{% static 'img/dosadores.png' %}" alt="Creatinas" class="menu-icon"> Creatinas
    </a>
  </li>
  <li>
    <a href="{% url 'pre_treino' %}">
      <img src="{% static 'img/creatinas.png' %}" alt="PrÃ© Treino" class="menu-icon"> PrÃ© Treino
    </a>
  </li>
  <li>
    <a href="{% url 'emagrecedores' %}">
      <img src="{% static 'img/vitaminas.png' %}" alt="Emagrecedores" class="menu-icon"> Emagrecedores
    </a>
  </li>
  <li>
    <a href="{% url 'acessorios' %}">
      <img src="{% static 'img/acesorios.png' %}" alt="AcessÃ³rios" class="menu-icon"> AcessÃ³rios
    </a>
  </li>
</ul>
  
  <!-- Categorias Ã  direita -->
  <div class="dropdown-right">
    <button class="dropbtn">Categorias</button>
    <div class="dropdown-content">
      <a href="{% url 'way_protein' %}">Way Protein</a>
      <a href="{% url 'pre_treino' %}">PrÃ© Treino</a>
      <a href="{% url 'emagrecedores' %}">Emagrecedores</a>
      <a href="{% url 'acessorios' %}">AcessÃ³rios</a>
      <a href="{% url 'bcaa' %}">Bcaa</a>
      <a href="{% url 'albumina' %}">Albumina</a>
      <a href="{% url 'aumento_testosterona' %}">Aumento da Testosterona</a>
      <a href="{% url 'bebidas' %}">Bebidas</a>
      <a href="{% url 'ciclistas' %}">Ciclistas</a>
      <a href="{% url 'coffee' %}">Coffee</a>
      <a href="{% url 'colageno' %}">ColÃ¡geno</a>
      <a href="{% url 'dose_unica' %}">Dose Ãšnica</a>
      <a href="{% url 'melatonina' %}">Melatonina</a>
      <a href="{% url 'omega_3' %}">Omega 3</a>
      <a href="{% url 'forca_energia' %}">ForÃ§a e Energia</a>
      <a href="{% url 'vitaminas' %}">Vitaminas</a>
      <a href="{% url 'aumentar_massa_muscular' %}">Aumentar Massa Muscular</a>
      <a href="{% url 'aminoacidos' %}">AminoÃ¡cidos</a>
      <a href="{% url 'articulacoes_saudaveis' %}">ArticulaÃ§Ãµes SaudÃ¡veis</a>
      <a href="{% url 'barras_de_proteinas' %}">Barras de ProteÃ­nas</a>
      <a href="{% url 'antioxidantes' %}">Antioxidantes</a>
      <a href="{% url 'carboidratos' %}">Carboidratos</a>
      <a href="{% url 'glutaminas' %}">Glutaminas</a>
      <a href="{% url 'pastas_de_amendoim' %}">Pastas de Amendoim</a>
      <a href="{% url 'caldas_e_molhos' %}">Caldas e Molhos</a>
      <a href="{% url 'snacks_doces' %}">Snacks e Doces</a>
      <a href="{% url 'combos' %}">Combos</a>
    </div>
  </div>
</div>

<!-- Sidebar -->
  <div id="sidebar" class="sidebar">
      <div class="logo-container">
        <img src="{% static 'img/imagem_nutri.png' %}" alt="Logo Nutri Amorim" class="logo-img">
      </div>
      <ul>
        <li class="sidebar-auth">
          {% if user.is_authenticated %}
            <a href="{% url 'logout' %}"><button>Sair</button></a>
          {% else %}
            <a href="{% url 'login' %}"><button>Entrar / Criar Conta</button></a>
          {% endif %}
        </li>
        <li><a href="{% url 'home' %}" class="inicio-link">InÃ­cio</a></li>
      <!-- As outras abas seguem aqui -->
        <li>
          <a class="toggle">Ofertas Naturais</a>
          <ul class="submenu">
            <li><a href="{% url 'produtos' %}">Produtos</a></li>
            <li><a href="{% url 'carrinho' %}">Carrinho</a></li>
            <li><a href="{% url 'finalizar_compra' %}">Finalizar Compra</a></li>
          </ul>
        </li>

        <li>
        <a class="toggle">Performance Esportiva</a>
        <ul class="submenu">
            <li><a href="{% url 'nutricao_para_atletas' %}">ğŸ½ï¸ NutriÃ§Ã£o para Atletas</a></li>
            <li><a href="{% url 'suplementacao_esportiva' %}">ğŸ’ª SuplementaÃ§Ã£o Esportiva</a></li>
            <li><a href="{% url 'protocolo_de_treino' %}">ğŸ“ˆ Protocolo de Treino</a></li>
            <li><a href="{% url 'recuperacao_muscular' %}">ğŸ›Œ RecuperaÃ§Ã£o Muscular</a></li>
          </ul>
        </li>

        <li>
        <a class="toggle">NutriÃ§Ã£o Funcional</a>
        <ul class="submenu">
          <li><a href="{% url 'alimentacao_alcalina' %}">ğŸ¥¦ AlimentaÃ§Ã£o Alcalina</a></li>
          <li><a href="{% url 'fitoterapia' %}">ğŸŒ¿ Fitoterapia</a></li>
          <li><a href="{% url 'protocolos_antiinflamatorios' %}">ğŸ”¥ Protocolos Anti-inflamatÃ³rios</a></li>
          <li><a href="{% url 'alimentos_funcionais' %}">ğŸ¥— Alimentos Funcionais</a></li>
        </ul>
      </li>
    
      <li>
        <a class="toggle">Objetivos</a>
        <ul class="submenu">
          <li><a href="{% url 'massa_magra' %}">ğŸ‹ï¸â€â™€ï¸ Massa Magra</a></li>
          <li><a href="{% url 'definicao_muscular' %}">ğŸ’ª DefiniÃ§Ã£o Muscular</a></li>
          <li><a href="{% url 'emagrecimento_saudavel' %}">âš–ï¸ Emagrecimento SaudÃ¡vel</a></li>
          <li><a href="{% url 'energia_disposicao' %}">âš¡ Energia e DisposiÃ§Ã£o</a></li>
        </ul>
      </li>
    
      <li>
        <a class="toggle">Receitas Medicinais</a>
        <ul class="submenu">
          <li><a href="{% url 'informativo' %}">ğŸ“° Informativo</a></li>
          <li><a href="{% url 'entenda_doencas_e_causas' %}">ğŸ” Entenda DoenÃ§as e Causas</a></li>
          <li><a href="{% url 'guia_de_ervas_medicinais' %}">ğŸŒ¿ Guia de Ervas</a></li>
          <li><a href="{% url 'doencas_comuns_e_solucoes_naturais' %}">ğŸ©º DoenÃ§as e SoluÃ§Ãµes</a></li>
          <li><a href="{% url 'receitas_para_imunidade' %}">ğŸ›¡ï¸ Imunidade Natural</a></li>
        </ul>
      </li>
    
      <li>
        <a class="toggle">Pesquisas CientÃ­ficas</a>
        <ul class="submenu">
          <li><a href="{% url 'comprovacao_cientifica' %}">ğŸ”¬ ComprovaÃ§Ã£o CientÃ­fica</a></li>
          <li><a href="{% url 'remedios_naturais_que_a_ciencia_comprova' %}">ğŸŒ± RemÃ©dios Naturais</a></li>
        </ul>
      </li>
    
      <li>
        <a class="toggle">Consultas</a>
        <ul class="submenu">
          <li><a href="{% url 'agendamento_online' %}">ğŸ“… Agendamento Online</a></li>
          <li><a href="{% url 'avaliacao_fisica' %}">ğŸ“ AvaliaÃ§Ã£o FÃ­sica</a></li>
          <li><a href="{% url 'planos_alimentares' %}">ğŸ“‹ Planos Alimentares</a></li>
        </ul>
      </li>
    
      <li><a href="{% url 'sobre_mim' %}">ğŸ‘¤ Sobre Mim</a></li>
      <li><a href="{% url 'conheca_nosso_trabalho' %}">ğŸ§‘â€ğŸ¤â€ğŸ§‘ Nosso Trabalho</a></li>
      <li><a href="{% url 'normas_e_regulamento' %}">ğŸ“‘ Normas</a></li>
      <li><a href="{% url 'conhecimento_na_pratica' %}">ğŸ§  Conhecimento na PrÃ¡tica</a></li>
    </ul>
   </div>

<!-- ConteÃºdo principal -->
<div class="content">
  {% block content %}
  {% endblock %}
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const toggles = document.querySelectorAll('.toggle'); // BotÃµes de alternÃ¢ncia de submenu
    const submenuState = JSON.parse(localStorage.getItem('openSubmenus')) || []; // Estado salvo no localStorage

    // Inicializa o estado das sub-abas baseado no localStorage
    toggles.forEach((toggle, index) => {
      const submenu = toggle.nextElementSibling;
      if (submenuState.includes(index)) {
        submenu.classList.add('show'); // Abre as sub-abas que estavam abertas
        toggle.classList.remove('closed'); // Ãcone de aba aberta
      } else {
        submenu.classList.remove('show'); // Fecha as sub-abas que estavam fechadas
        toggle.classList.add('closed');   // Ãcone de aba fechada
      }

      toggle.addEventListener('click', () => {
        const isOpen = submenu.classList.contains('show');
        
        // Atualiza o estado da sub-aba
        if (isOpen) {
          submenu.classList.remove('show');
          toggle.classList.add('closed'); // Muda o Ã­cone para fechado
        } else {
          submenu.classList.add('show');
          toggle.classList.remove('closed'); // Muda o Ã­cone para aberto
        }

        // Atualiza o estado no localStorage
        updateSubmenuState();
      });
    });

    // FunÃ§Ã£o para atualizar o estado das abas no localStorage
    function updateSubmenuState() {
      const openSubmenus = [];
      toggles.forEach((toggle, index) => {
        const submenu = toggle.nextElementSibling;
        if (submenu.classList.contains('show')) {
          openSubmenus.push(index);
        }
      });
      localStorage.setItem('openSubmenus', JSON.stringify(openSubmenus));
    }

    // Script para mostrar/ocultar a sidebar ao clicar no menu hambÃºrguer
    const menuIcon = document.querySelector('.menu-icon'); // Ãcone do menu hambÃºrguer
    const sidebar = document.querySelector('.sidebar'); // Sidebar a ser exibida/ocultada

    if (menuIcon && sidebar) {
      menuIcon.addEventListener('click', () => {
        menuIcon.classList.toggle('open');  // Anima o Ã­cone de hambÃºrguer
        sidebar.classList.toggle('show');   // Exibe ou esconde a sidebar
      });
    }

    // FunÃ§Ã£o para ajustar a visibilidade da sidebar conforme o tamanho da tela
    function adjustSidebarForScreenSize() {
      const screenWidth = window.innerWidth;

      if (screenWidth <= 1600) { // Para telas 
        // No mobile/tablet, a sidebar deve estar escondida por padrÃ£o
        sidebar.classList.remove('show');
        menuIcon.classList.remove('open');
      } else { // Para telas grandes (desktops)
        // Para desktops, a sidebar pode ser fixada, sem necessidade de animaÃ§Ã£o
        sidebar.classList.add('show');
        menuIcon.classList.add('open');
      }
    }

    // Ajusta a sidebar quando a tela for redimensionada
    window.addEventListener('resize', adjustSidebarForScreenSize);
    
    // Chama a funÃ§Ã£o para configurar a visibilidade inicial da sidebar
    adjustSidebarForScreenSize();

    // Seleciona o Ã­cone do carrinho e o dropdown
const cartIcon = document.querySelector('.cart-icon');
const cartDropdown = document.getElementById('cartDropdown');

// FunÃ§Ã£o para mostrar a aba quando passar o mouse sobre o Ã­cone
cartIcon.addEventListener('mouseover', () => {
  cartDropdown.classList.add('show'); // Mostra a aba
});

// FunÃ§Ã£o para esconder a aba quando o mouse sair do Ã­cone ou da aba
cartIcon.addEventListener('mouseout', () => {
  cartDropdown.classList.remove('show'); // Esconde a aba
});

// Se o usuÃ¡rio passar o mouse sobre a prÃ³pria aba do carrinho, a aba deve continuar visÃ­vel
cartDropdown.addEventListener('mouseover', () => {
  cartDropdown.classList.add('show'); // Mostra a aba
});

cartDropdown.addEventListener('mouseout', () => {
  cartDropdown.classList.remove('show'); // Esconde a aba
});

// FunÃ§Ã£o para redirecionar o usuÃ¡rio para a pÃ¡gina de produtos
function irAsCompras() {
  window.location.href = '/produtos'; // Substitua pelo link da sua pÃ¡gina de produtos
}
});

document.addEventListener("click", function (event) {
    // Fecha dropdowns se clicar fora
    const isButton = event.target.classList.contains("dropbtn");
    if (!isButton) {
      document.querySelectorAll(".dropdown-content").forEach(dropdown => {
        dropdown.style.display = "none";
      });
    }
  });

  document.querySelectorAll(".dropbtn").forEach(button => {
    button.addEventListener("click", function (e) {
      e.stopPropagation();
      const dropdown = this.nextElementSibling;
      const isOpen = dropdown.style.display === "block";

      // Fecha todos
      document.querySelectorAll(".dropdown-content").forEach(d => d.style.display = "none");

      // Abre se nÃ£o estava aberto
      if (!isOpen) {
        dropdown.style.display = "block";
      }
    });
  });

</script>